const widthMobile=window.innerWidth>0?window.innerWidth:screen.width;function forceLayout(){const t=d3.select(".chart-force"),e=t.select("svg"),a=2,o=d3.scaleOrdinal(["#35618f","#70a5c1","#3444bc","#c8aee7","#c20da6","#ea88e2","#812050","#2eece6"]);function r(r){const c=t.node().offsetWidth;e.attr("width",c).attr("height",600);const s=e.selectAll(".circle").data(r).enter().append("circle").attr("class","circle").attr("r",t=>10*t.total).attr("fill",t=>o(t.nombre)).attr("cx",t=>t.x).attr("cy",t=>t.y);d3.forceSimulation().force("forceX",d3.forceX().x(.5*c)).force("forceY",d3.forceY().y(300)).force("center",d3.forceCenter().x(.5*c).y(300)).force("charge",d3.forceManyBody().strength(5)).force("collision",d3.forceCollide().radius(t=>10*t.total)).nodes(r).force("collide",d3.forceCollide().strength(.5).radius(t=>t.total+a).iterations(1)).on("tick",()=>s.attr("cx",({x:t})=>t).attr("cy",({y:t})=>t));const d=d3.group(r.map(t=>t.nombre));let n=d.filter((t,e)=>d.indexOf(t)===e);n=n.reverse(t=>t.nombre);const i=e.selectAll(".legend").remove().exit().data(n,t=>t).enter().append("g").attr("class","legend").attr("tema",t=>t);i.attr("transform",(t,e)=>`translate(50,${25*(e+5)})`),i.append("text").attr("x",20).attr("y",10).text(t=>t),i.append("rect").attr("width",10).attr("height",10).style("fill",t=>o(t))}window.addEventListener("resize",()=>{r(dataz)}),d3.csv("csv/total.csv",(t,e)=>{t?console.log(t):(dataz=e,dataz.forEach(t=>{t.nombre=t.nombre,t.total=+t.total,t.pp=+t.pp,t.psoe=+t.psoe,t.cs=+t.cs,t.up=+t.up}),r(dataz))})}function grid(t,e){const a=d3.select(`.grid-chart-${e}`),o=d3.select(".grid-charts"),r=d3_iconarray.layout().width(16).height(8),c=6,s={top:c,right:c,bottom:c,left:c},d=24,n=o.node().offsetWidth/3,i=d3.scaleLinear().range([0,n-(s.left+s.right)]).domain([0,16]);function l(t){a.selectAll(".temas").data(t).enter().append("div").attr("class","temas").call(function(t,e){r.widthFirst(e),t.append("h3").attr("class","tema-label").html(t=>t.nombre),t.append("svg").attr("width",n).attr("height",d).append("g").attr("transform",`translate(0,${s.top})`).attr("class",t=>t.nombre).selectAll("rect").data(t=>r(d3.range(0,t.total,1))).enter().append("rect").attr("x",t=>i(t.position.x)).attr("y",t=>i(t.position.y)).attr("rx",2.5).attr("ry",2.5).attr("class",t=>t.nombre).attr("width",2.5*c).attr("height",2.5*c)},!0)}window.addEventListener("resize",()=>{l(dataz)}),d3.csv(t,(t,e)=>{t?console.log(t):(dataz=e,dataz.forEach(t=>{t.nombre=t.nombre,t.total=+t.total}),l(dataz))})}forceLayout();const political=[["csv/partido-popular/partido-popular-total-propuestas.csv","pp"],["csv/partido-socialista/partido-socialista-total-propuestas.csv","psoe"],["csv/unidas-podemos/unidas-podemos-total-propuestas.csv","up"],["csv/ciudadanos/ciudadanos-total-propuestas.csv","cs"],["csv/vox/vox-total-propuestas.csv","vox"]];for(const t of political)grid(...t);