const widthMobile=window.innerWidth>0?window.innerWidth:screen.width;function forceLayout(){const t=d3.select(".chart-force"),e=t.select("svg"),r=2,c=d3.scaleOrdinal(["#35618f","#70a5c1","#3444bc","#c8aee7","#c20da6","#ea88e2","#812050","#2eece6"]);let a;function o(a){const o=t.node().offsetWidth;e.attr("width",o).attr("height",600);const l=e.selectAll(".circle").data(a).enter().append("circle").attr("class","circle").attr("r",t=>10*t.total).attr("fill",t=>c(t.tema)).attr("cx",t=>t.x).attr("cy",t=>t.y);d3.forceSimulation().force("forceX",d3.forceX().x(.5*o)).force("forceY",d3.forceY().y(300)).force("center",d3.forceCenter().x(.5*o).y(300)).force("charge",d3.forceManyBody().strength(5)).force("collision",d3.forceCollide().radius(t=>10*t.total)).nodes(a).force("collide",d3.forceCollide().strength(.5).radius(t=>t.total+r).iterations(1)).on("tick",()=>l.attr("cx",({x:t})=>t).attr("cy",({y:t})=>t));const n=d3.group(a.map(t=>t.tema));let d=n.filter((t,e)=>n.indexOf(t)===e);d=d.reverse(t=>t.tema);const i=e.selectAll(".legend").remove().exit().data(d,t=>t).enter().append("g").attr("class","legend").attr("tema",t=>t);i.attr("transform",(t,e)=>`translate(50,${25*(e+5)})`),i.append("text").attr("x",20).attr("y",10).text(t=>t),i.append("rect").attr("width",10).attr("height",10).style("fill",t=>c(t))}window.addEventListener("resize",()=>{o(a)}),d3.csv("csv/total.csv",(t,e)=>{t?console.log(t):((a=e).forEach(t=>{t.tema=t.tema,t.total=+t.total,t.pp=+t.pp,t.psoe=+t.psoe,t.cs=+t.cs,t.up=+t.up}),o(a))})}forceLayout();